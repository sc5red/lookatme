@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
@import "tailwindcss";

@layer base {
  * { font-family: "Poppins", sans-serif; }
  html { color-scheme: light; }
  html.dark { color-scheme: dark; }
  /* Offset body content for fixed header height (mobile/desktop) */
  body { padding-top: 3.5rem; }
  @media (min-width:768px){ body { padding-top:4rem; } }
  /* Reserve space for scrollbar to prevent layout shift when content height changes */
  html { scrollbar-gutter: stable both-edges; }
  body { overflow-y: scroll; }
}

/* Class-based dark palette (no media queries) */
@layer utilities {
  html.dark body { background-color:#111827; color:#f3f4f6; }
  /* header inherits body colors now */
  html.dark header { background-color:#111827; }
  html.dark #user-menu { background-color:#374151; border:1px solid #4b5563; }
  html.dark aside { background-color:#1f2937; border:1px solid #374151; }
  html.dark aside h2 { color:#f3f4f6; border-color:#374151; }
  html.dark button:not(#theme-toggle) { color:#f3f4f6; }
  html.dark button:not(#theme-toggle):hover { background-color:#4b5563; color:#ffffff; }
  html.dark #theme-toggle { color:#e5e7eb; }
  html.dark #theme-toggle:hover { background-color:#4b5563; }
  /* Explicit light palette baseline */
  html:not(.dark) body { background-color:#f3f4f6; color:#111827; }
  html:not(.dark) header { background-color:#f3f4f6; }
  html:not(.dark) #user-menu { background-color:#ffffff; border:1px solid #d1d5db; }
  html:not(.dark) aside { background-color:#ffffff; border:1px solid #e5e7eb; }
  html:not(.dark) aside h2 { color:#111827; border-color:#e5e7eb; }
  html:not(.dark) button:not(#theme-toggle) { color:#1f2937; }
  html:not(.dark) button:not(#theme-toggle):hover { background-color:#d1d5db; }
  html:not(.dark) #theme-toggle { color:#374151; }
  html:not(.dark) #theme-toggle:hover { background-color:#d1d5db; }
  /* Light mode dropdown item refinements */
  html:not(.dark) #user-menu a,
  html:not(.dark) #user-menu button#theme-toggle,
  html:not(.dark) #user-menu button[onclick*='logout'] {
    background-color:transparent;
    color:#374151;
    transition:background-color .18s ease, color .18s ease;
  }
  html:not(.dark) #user-menu a:hover,
  html:not(.dark) #user-menu button#theme-toggle:hover,
  html:not(.dark) #user-menu button[onclick*='logout']:hover {
    background-color:#f3f4f6;
  }
  /* Active nav button tint */
  html:not(.dark) nav button.bg-blue-500 { box-shadow:0 0 0 1px #1d4ed8 inset; }
  /* Card panel shadow subtle */
  html:not(.dark) aside { box-shadow:0 1px 2px rgba(0,0,0,.06),0 1px 3px rgba(0,0,0,.08); }
  html.dark aside { box-shadow:0 1px 2px rgba(0,0,0,.5),0 1px 3px rgba(0,0,0,.4); }
  /* Brand wordmark adaptive color */
  .brand { color:#111827; }
  html.dark .brand { color:#f3f4f6; }
  /* Headings adaptive (ensure consistent contrast) */
  h1,h2,h3,h4,h5,h6 { color:#111827; }
  html.dark h1,html.dark h2,html.dark h3,html.dark h4,html.dark h5,html.dark h6 { color:#f3f4f6; }
  /* Links base style (avoid overriding nav/button explicit classes) */
  a { color:#1d4ed8; text-decoration:none; }
  a:hover { text-decoration:underline; }
  html.dark a { color:#60a5fa; }
  html.dark a:hover { text-decoration:underline; }
  /* Preserve brand after link rule */
  a.brand { color:#111827; }
  html.dark a.brand { color:#f3f4f6; }
}

/* Theme toggle label swap handled in JS; if you want CSS-only you could add hidden classes */

/* Minimal custom scrollbar (WebKit) */
/* Keep it subtle; widen only on hover for accessibility */
::-webkit-scrollbar { width: 10px; background: transparent; }
::-webkit-scrollbar-track { background: transparent; }
html:not(.dark) ::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.25); border-radius: 20px; border: 2px solid transparent; background-clip: content-box; }
html.dark ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.25); border-radius: 20px; border: 2px solid transparent; background-clip: content-box; }
html:not(.dark) ::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.4); }
html.dark ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.4); }

/* Firefox scrollbar */
html { scrollbar-width: thin; }
html:not(.dark) { scrollbar-color: rgba(0,0,0,0.35) transparent; }
html.dark { scrollbar-color: rgba(255,255,255,0.35) transparent; }

/* Optional: smoother inertial feel on touchpads */
body { overscroll-behavior-y: contain; }

/* Rainbow animated text for Remove Ads button (simplified) */
@layer utilities {
  .rainbow-text {
    background:linear-gradient(90deg,#ff0057,#ffb800,#00d07e,#007bff,#7f00ff,#ff0057);
    -webkit-background-clip:text;background-clip:text;
    color:transparent;
    background-size:200% 100%;
    animation:rainbow-slide 3s linear infinite;
  }
  #remove-ads-btn:focus { outline:2px solid currentColor; outline-offset:2px; }
}

@keyframes rainbow-slide { to { background-position:200% 0; } }